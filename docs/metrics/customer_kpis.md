# Customer KPIs

This document defines customer-level KPIs used for analytics and BI.
All metrics are computed at **customer grain** and evaluated **as of snapshot date**.

---

## Customer grain

One row per `customer_unique_id` per `snapshot_date`.

---

## Metrics

### Recency (recency_days)

**Definition**
Number of days since customer's most recent completed purchase.

**Formula**
```sql
DATE_DIFF(snapshot_date, last_purchase_date, DAY)
```

### Frequency

**Definition**
Total number of distinct orders place by the customer.

**Formula**
```sql
COUNT(DISTINCT order_id)
```

### Monetary (monetary_value)

**Definition**
Total revenue generated by the customer.

**Formula**
```sql
SUM(total_order_value)
```

### is_inactive

**Definition**
Flag indicating wether the customer is inactive based on recency.

**Formula**
```sql
recency_days > inactivity_threshold days
```

**Interpretation**
TRUE=inactive, FALSE=active

### Monetary Segment (monetary_segment)

**Definition**
Customer value tier based on total spending.

**Rules**
< 100: Low value
100-500: Mid valud
> 500: High Value

### Behavior Segment (behavior_segment)

**Definition**
Behavioral classification based on purchasing pattern.

**Priority Logic**
1. High-ticket planner
2. Impulse buyer
3. Freight-sensitive
4. Multi-item shopper
5. Standard buyer
